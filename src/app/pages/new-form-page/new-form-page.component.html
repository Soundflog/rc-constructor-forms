<div class="container">
  <!--    ПОЛЯ-АНКЕТЫ (name, description) ОБЯЗАТЕЛЬНЫЕ НЕИЗМЕНЯЕМЫЕ ПОЛЯ-->
  <form [formGroup]="mainFG">
    <tui-island
      class="tui-space_bottom-5"
      [hoverable]=false
      size="l"
      textAlign="left"
    >
      <tui-textarea
        class="tui-space_bottom-5"
        tuiTextfieldSize="l"
        formControlName="name"
      >
        Название анкеты
        <textarea
          maxlength="97"
          placeholder="Название анкеты"
          tuiTextfield
        ></textarea>
      </tui-textarea>
      <tui-textarea
        class="tui-space_bottom-5"
        tuiTextfieldSize="l"
        formControlName="description">
        Описание анкеты
        <textarea
          maxlength="97"
          placeholder="Описание анкеты"
          tuiTextfield
        ></textarea>
      </tui-textarea>

      <label>
        <tui-combo-box
          formControlName="scaleId"
          [stringify]="scaleChooseStringify"
          [tuiTextfieldLabelOutside]="true"
        >
          Шкала
          <tui-data-list-wrapper
            *tuiDataList
            [itemContent]="scaleChooseStringify | tuiStringifyContent"
            [items]="scaleItems$ | async | tuiFilterByInputWith: scaleChooseStringify"
          ></tui-data-list-wrapper>
        </tui-combo-box>
      </label>
    </tui-island>
    <div *ngIf="this.idFromRoute != null; else defaultForm">
      <ng-container *ngIf="formById$ | async as form; else loading">
        <app-question-constructor [anketa]="form"></app-question-constructor>
        <div class="group" tuiGroup>
          <button
            class=""
            appearance="secondary-destructive"
            tuiButton
            title="Удалить Форму"
            size="xl"
            (click)="deleteForm(form.id != null ?  form.id: 0)"
          >
            Удалить
          </button>
        </div>
      </ng-container>
      <ng-template #loading>
        <app-loading/>
      </ng-template>
    </div>

    <ng-template #defaultForm>
      <app-question-constructor [anketa]="formDefault"></app-question-constructor>
    </ng-template>
    <div class="group" tuiGroup>
      <button
        tuiButton
        size="xl"
        class=""
        type="submit"
        (click)="onSubmitForm()"
      >
        Сохранить
      </button>
    </div>
  </form>
  <!--    ВОПРОС-КОНСТРУКТОР НЕОБЯЗАТЕЛЬНЫЕ ИЗМЕНЯЕМЫЕ ПОЛЯ -->

</div>

